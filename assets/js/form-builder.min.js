jQuery((function(e){if(1==jQuery("ul#warranty_form").length&&1==jQuery("ul#warranty_form_fields").length){var t=Warranty_Form_Builder;t.init(jQuery("#warranty_form")),jQuery("ul#warranty_form").sortable({cursor:"move",tolerance:"pointer",update:function(e,i){t.record_fields()}}),jQuery("a.control").click((function(e){e.preventDefault();var i=jQuery(this).data("type"),a=jQuery(this).data("options"),l=t.render_field(i,a);jQuery("html,body").animate({scrollTop:jQuery("#wfb-field-"+l).offset().top-100})})),jQuery("#warranty_form a.toggle-field").click()}}));var Warranty_Form_Builder={types:{paragraph:"Paragraph",text:"Text Field",textarea:"Multi-line Text Field",select:"Drop Down",file:"File Upload Field"},used_keys:[],container:null,input_field:"#form_fields",placeholder:"Click on a field to add to the form",init:function(e,t){this.set_container(e),t&&(this.placeholder=t),this.maybe_show_placeholder(),this.set_handlers()},set_container:function(e){this.container=e},set_handlers:function(){var e=this;jQuery(".wfb-remove").on("click",(function(t){t.preventDefault(),jQuery(this).parents("li").eq(0).remove(),e.maybe_show_placeholder(),e.record_fields()})),jQuery(".wfb-toggle").on("click",(function(e){e.preventDefault();var t=this,i=jQuery(this).data("key"),a=jQuery("#wfb-content-"+i);a.is(":visible")?a.slideUp((function(){jQuery(t).html("&#9662;")})):a.slideDown((function(){jQuery(t).html("&#9652;")}))}))},maybe_show_placeholder:function(){0==jQuery(this.container).find("li").length&&jQuery(this.container).append("<li class='placeholder'>"+this.placeholder+"</li>")},remove_placeholder:function(){jQuery(this.container).find("li.placeholder").remove()},generate_key:function(){min=100,max=2147483647;do{key=Math.floor(Math.random()*(max-min+1))+min}while(this.used_keys.indexOf(key)>-1);return this.used_keys.push(key),key},add_paragraph:function(){this.remove_placeholder(),jQuery(this.container).append('<li>Paragraph Field<a class="remove-field wfb-remove" href="#">&times;</a></li>')},add_text:function(){this.remove_placeholder(),jQuery(this.container).append('<li>Text Field<a class="remove-field wfb-remove" href="#">&times;</a></li>')},add_textarea:function(){this.remove_placeholder(),jQuery(this.container).append('<li>TextArea Field<a class="remove-field wfb-remove" href="#">&times;</a></li>')},add_select:function(){this.remove_placeholder(),jQuery(this.container).append('<li>Select Field<a class="remove-field wfb-remove" href="#">&times;</a></li>')},add_file:function(){this.remove_placeholder(),jQuery(this.container).append('<li>File Field<a class="remove-field wfb-remove" href="#">&times;</a></li>')},render_field:function(e,t){var i=this.generate_key();this.remove_placeholder();var a=' <div class="wfb-field wfb-field-'+e+'" data-key="'+i+'" id="wfb-field-'+i+'">                                                <div class="wfb-field-title">                                                    <h3>'+this.types[e]+'</h3>                                                    <div class="wfb-field-controls">                                                        <a class="toggle-field wfb-toggle" data-key="'+i+'" href="#">&#9652;</a>                                                        <a class="remove-field wfb-remove" href="#">&times;</a>                                                    </div>                                                </div>                                                <div class="wfb-content" id="wfb-content-'+i+'">                                                    <div class="wfb-field-content">                                                        <table class="form-table">';for(x in t=t.split("|"))a+=this.render_option_row(t[x],i);return a+="</table></div></div>",jQuery(this.container).append("<li class='wfb-field' data-key='"+i+"' data-type='"+e+"'>"+a+"</li>"),this.record_fields(),jQuery(".tips, .help_tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}),i},render_option_row:function(e,t){var i="<tr>";return"name"==e?i+='<th>Name <img class="help_tip" data-tip="'+WFB.tips[e]+'" src="'+WFB.help_img_url+'" height="16" width="16" /></th><td><input type="text" name="fb_field['+t+'][name]" /></td>':"label"==e?i+='<th>Label <img class="help_tip" data-tip="'+WFB.tips[e]+'" src="'+WFB.help_img_url+'" height="16" width="16" /></th><td><input type="text" name="fb_field['+t+'][label]" /></td>':"text"==e?i+='<th>Text</th><td><textarea name="fb_field['+t+'][text]" rows="5" cols="40"></textarea></td>':"default"==e?i+='<th>Default Value <img class="help_tip" data-tip="'+WFB.tips[e]+'" src="'+WFB.help_img_url+'" height="16" width="16" /></th><td><input type="text" name="fb_field['+t+'][default]" /></td>':"rowscols"==e?i+='<th>Size</th><td><input type="text" size="2" name="fb_field['+t+'][rows]"><span class="description">Rows</span> <input type="text" size="2" name="fb_field['+t+'][cols]"><span class="description">Columns</span>':"options"==e?i+='<th>Options <img class="help_tip" data-tip="'+WFB.tips[e]+'" src="'+WFB.help_img_url+'" height="16" width="16" /></th><td><textarea name="fb_field['+t+'][options]" rows="3" cols="40"></textarea></td>':"multiple"==e?i+='<th>Allow Multiple <img class="help_tip" data-tip="'+WFB.tips[e]+'" src="'+WFB.help_img_url+'" height="16" width="16" /></th><td><input type="checkbox" name="fb_field['+t+'][multiple]" value="yes" /></td>':"required"==e&&(i+='<th>Required <img class="help_tip" data-tip="'+WFB.tips[e]+'" src="'+WFB.help_img_url+'" height="16" width="16" /></th><td><input type="checkbox" name="fb_field['+t+'][required]" value="yes" /></td>'),i+="</tr>"},record_fields:function(){var e=[];jQuery("li.wfb-field").each((function(){e.push({key:jQuery(this).data("key"),type:jQuery(this).data("type")})})),jQuery(this.input_field).val(JSON.stringify(e))}};
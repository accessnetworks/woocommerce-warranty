jQuery(document).ready((function(t){var e;jQuery("#the-list").on("click","a.inline-rma",(function(t){t.preventDefault();var e=jQuery(this).closest("tr").attr("id");jQuery("#the-list #inline-edit-"+e).length>0?jQuery("#the-list #inline-edit-"+e).find(".close_tr").click():(r(),a(e))})),jQuery("#the-list").on("click",".close_tr",(function(){jQuery(this).parents("tr").remove(),jQuery("#the-list").find("tr.hidden").remove()})),jQuery("#the-list").on("click",".rma-update",(function(){var e=jQuery(this).parents(".warranty-request"),a=e.find("input,select,textarea"),r=jQuery(a).serializeArray();r.push({name:"action",value:"warranty_update_inline"}),r.push({name:"id",value:jQuery(this).data("id")}),r.push({name:"_wpnonce",value:jQuery(this).data("security")}),e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t.post(ajaxurl,r,(function(t){if("OK"==t.status){var a=jQuery(e).find(".warranty-update-message");a.find("p").html(t.message),a.show(),e.find(".actions-block").html(t.actions)}else alert(t.message);e.unblock()}))})),jQuery("#the-list").on("click",".rma-upload-button",(function(t){t.preventDefault();var a=jQuery(this);(e=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",(function(){attachment=e.state().get("selection").first().toJSON();var t=a.data("id");jQuery("#shipping_label_"+t).val(attachment.url),jQuery("#shipping_label_id_"+t).val(attachment.id)})),e.open()})),jQuery("#the-list").on("click",".warranty-trash",(function(){var e=jQuery(this).closest(".warranty-request");e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t.post(ajaxurl,{action:"warranty_delete_request",id:jQuery(this).data("id"),_wpnonce:jQuery(this).data("security")},(function(){e.unblock().remove()}))})),jQuery("#the-list").on("click",".warranty-item-coupon",(function(){var t=jQuery(this).data("id");tb_show("Coupon","#TB_inline?width=400&height=250&inlineId=warranty-coupon-modal-"+t)})),jQuery("body").on("click",".warranty-process-coupon",(function(){jQuery(this);var e=jQuery(this).closest(".warranty-request"),a=jQuery(this).parents("#TB_window").find("input.amount").val();jQuery(this).data("id"),jQuery(this).data("security");tb_remove(),e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t.post(ajaxurl,{action:"warranty_send_coupon",ajax:!0,id:jQuery(this).data("id"),amount:a,_wpnonce:jQuery(this).data("security")},(function(t){"OK"==t.status?window.location.reload():(alert(t.message),e.unblock())}))})),jQuery("#the-list").on("click",".warranty-item-refund",(function(){var t=jQuery(this).data("id");tb_show("Refund","#TB_inline?width=400&height=250&inlineId=warranty-refund-modal-"+t)})),jQuery("body").on("click",".warranty-process-refund",(function(){var e=jQuery(this).data("id"),a=jQuery(this).data("security"),r=jQuery("#warranty_request_"+e),n=jQuery(this).parents("#TB_window").find("input.amount").val();tb_remove(),r.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t.post(ajaxurl,{action:"warranty_refund_item",ajax:!0,id:jQuery(this).data("id"),amount:n,_wpnonce:a},(function(t){"OK"==t.status?window.location.reload():(alert(t.message),r.unblock())}))})),jQuery("#the-list").on("click",".warranty-inventory-return",(function(){var e=jQuery(this),a=jQuery(this).closest(".warranty-request");jQuery(this).data("id"),jQuery(this).data("security");a.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t.post(ajaxurl,{action:"warranty_return_inventory",ajax:!0,id:jQuery(this).data("id"),_wpnonce:jQuery(this).data("security")},(function(t){"OK"==t.status?(jQuery("#warranty_update_message p").html(t.message),jQuery("#warranty_update_message").show(),e.val("Stock returned").attr("disabled",!0)):alert(t.message),a.unblock()}))}));var a=function(t){var e=jQuery("#inline-edit-"+t).clone(),a=jQuery("#"+t);e.insertAfter(a).show(),jQuery("<tr class='hidden'></tr>").insertBefore(e)},r=function(){jQuery("#the-list tr.hidden").remove(),jQuery("#the-list tr.inline-edit-row").remove()}}));